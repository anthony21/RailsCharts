<script type="text/javascript">
  window.userTheme = '<%= Current.user&.theme || 'sync' %>'
</script>

<% if Current.user.nil? || Current.user.theme == 'sync' %>
  <script type="text/javascript">
    if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
      document.documentElement.classList.add('dark')
    }

    window.matchMedia("(prefers-color-scheme: dark)").addListener(function (event) {
      if (event.matches) {
        document.documentElement.classList.add('dark')
      } else {
        document.documentElement.classList.remove('dark')
      }
    })
  </script>
<% end %>
